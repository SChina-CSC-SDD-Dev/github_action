name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]

jobs:
  example-job:
    runs-on: ubuntu-latest

    steps:
      - name: apt update
        run: |
          sudo apt update
          
      - name: apt install
        run: |
          sudo apt install -y --no-install-recommends \
            libglib2.0-dev libfdt-dev libpixman-1-dev \
            libaio-dev libbluetooth-dev libcapstone-dev libbrlapi-dev libbz2-dev \
            libcap-ng-dev libcurl4-gnutls-dev libgtk-3-dev \
            libibverbs-dev libjpeg8-dev libncurses5-dev libnuma-dev \
            librbd-dev librdmacm-dev libnfs-dev libiscsi-dev libgcrypt20-dev \
            libsasl2-dev libsdl2-dev libseccomp-dev libsnappy-dev libssh-dev \
            libvde-dev libvdeplug-dev libvte-2.91-dev libxen-dev liblzo2-dev \
            xfslibs-dev zlib1g-dev \
            valgrind \
            ninja-build \
            python3-venv \
            pip \
            gcc \
            vim

      - name: Clone Qemu
        uses: actions/checkout@v4
        with:
          repository: espressif/qemu
          branch: esp-develop
          path: qemu

      - name: Configure Qemu
        run: |
          cd qemu
          ./configure --target-list=xtensa-softmmu \
          --enable-gcrypt \
          --enable-slirp \
          --enable-debug --enable-sanitizers \
          --enable-sdl \
          --disable-strip --disable-user \
          --disable-capstone --disable-vnc \
          --disable-gtk

      - name: Build Qemu
        run: |
          cd qemu
          ninja -C build
          ls build
          
      - name: Check out the repository to the runner
        uses: actions/checkout@v4  
